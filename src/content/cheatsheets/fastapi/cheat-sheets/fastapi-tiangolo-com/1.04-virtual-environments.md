---
title: "1.04 - Entornos Virtuales en Python"
description: "Gu√≠a definitiva para aislar proyectos y evitar el infierno de dependencias"
tags: ["python", "virtualenv", "venv", "uv", "cli"]
---

## A - Entorno Virtual vs. Variable de Entorno [üî¥ Fundamental]

#### 1. **Introducci√≥n:**

No te confundas por los nombres parecidos: uno es una "caja" para guardar herramientas y el otro es una configuraci√≥n del sistema.

#### 2. **Ejemplo:**

> **Entorno Virtual:** Una carpeta (`.venv`) que contiene una instalaci√≥n de Python y librer√≠as espec√≠ficas para **un solo proyecto**.
>
> **Variable de Entorno:** Una variable en tu sistema operativo (como `PATH`) que los programas pueden leer para saber c√≥mo comportarse.

#### 3. **Desarrollo:**

Es vital entender esta distinci√≥n. Un **Entorno Virtual** es literalmente un directorio con archivos dentro. Su funci√≥n es aislar. Si instalas una librer√≠a aqu√≠, no afecta al resto de tu computadora. Una **Variable de Entorno** es un valor global o de sesi√≥n que el sistema usa (como decirle a Windows d√≥nde buscar programas).

[üî¥ Fundamental]: Si no entiendes esto, creer√°s que est√°s configurando tu PC cuando solo est√°s configurando una carpeta.

---

## B - Estructura del Proyecto [üü° Importante]

#### 1. **Introducci√≥n:**

Antes de crear nada, necesitas orden. Crea una carpeta para todos tus c√≥digos y una subcarpeta para tu proyecto espec√≠fico.

#### 2. **Ejemplo:**

```bash
# En tu terminal:
mkdir code              # Carpeta general
cd code
mkdir awesome-project   # Carpeta del proyecto espec√≠fico
cd awesome-project      # Entras en ella
```

#### 3. **Desarrollo:**

El texto recomienda crear un directorio `code` en tu carpeta de usuario y dentro de √©l, una carpeta por cada proyecto. El entorno virtual vivir√° **dentro** de la carpeta de ese proyecto espec√≠fico (`awesome-project`).

[üü° Importante]: El orden en el sistema de archivos evita que crees entornos virtuales en lugares perdidos de tu disco duro.

---

## C - Creaci√≥n del Entorno: `venv` vs `uv` [üî¥ Fundamental]

#### 1. **Introducci√≥n:**

Aqu√≠ creamos la "caja aislada". Tienes dos formas: la cl√°sica (`venv`) que viene con Python, o la moderna y r√°pida (`uv`).

#### 2. **Ejemplo:**

**Opci√≥n A: Usando Python nativo (`venv`)**

```bash
python -m venv .venv
```

**Opci√≥n B: Usando `uv` (Si lo tienes instalado)**

```bash
uv venv
```

**Explicaci√≥n del ejemplo:**

- `python -m venv`: Le dice a Python "ejecuta el m√≥dulo `venv`".
- `.venv`: Es el nombre que le damos a la carpeta (es una convenci√≥n est√°ndar).
- `uv`: Hace lo mismo pero suele ser m√°s r√°pido y autom√°tico.

#### 3. **Desarrollo:**

**COMPARACI√ìN CR√çTICA:**

- **`venv`**: Viene instalado por defecto. Es universal. √ösalo si no quieres instalar herramientas extra.
- **`uv`**: Es una herramienta externa. Es m√°s r√°pida y gestiona versiones de Python por ti.

Ambos crear√°n una carpeta llamada `.venv` (puedes cambiar el nombre, pero por convenci√≥n usa `.venv`). **Solo necesitas hacer esto una vez por proyecto.**

[üî¥ Fundamental]: Sin este paso, instalar√°s todo en tu sistema global, lo cual es una receta para el desastre a largo plazo.

---

## D - Activaci√≥n del Entorno [üî¥ Fundamental]

#### 1. **Introducci√≥n:**

Crear el entorno no basta; tienes que "entrar" en √©l. Este paso var√≠a seg√∫n tu Sistema Operativo.

#### 2. **Ejemplo:**

**Linux / macOS:**

```bash
source .venv/bin/activate
```

**Windows (PowerShell):**

```powershell
.venv\Scripts\Activate.ps1
```

**Windows (Git Bash):**

```bash
source .venv/Scripts/activate
```

#### 3. **Desarrollo:**

¬°Ojo aqu√≠! Debes hacer esto **cada vez** que abras una nueva terminal para trabajar en el proyecto. Al activarlo, le dices a tu terminal: "De ahora en adelante, cuando diga `python`, usa el que est√° en la carpeta `.venv`, no el de Windows/Linux".

[üî¥ Fundamental]: Si olvidas activar, instalar√°s las librer√≠as en el lugar equivocado aunque hayas creado la carpeta `.venv`.

---

## E - Verificaci√≥n de Activaci√≥n [üîµ Espec√≠fico]

#### 1. **Introducci√≥n:**

¬øEres paranoico como yo? As√≠ es como confirmas que realmente est√°s dentro del entorno virtual.

#### 2. **Ejemplo:**

**Linux / macOS:**

```bash
which python
# Deber√≠a responder algo como: .../awesome-project/.venv/bin/python
```

**Windows (PowerShell):**

```powershell
Get-Command python
# Deber√≠a responder algo como: ...\awesome-project\.venv\Scripts\python
```

#### 3. **Desarrollo:**

Si la ruta que te muestra la terminal contiene `.venv`, ¬°felicidades! Est√°s seguro. Si muestra una ruta gen√©rica del sistema (ej. `/usr/bin/python` o `C:\Python39...`), **no** est√°s en el entorno virtual. Vuelve al paso anterior.

[üîµ Espec√≠fico]: Es opcional, pero te salva de errores tontos de "cre√≠ que estaba activado".

---

## F - Actualizaci√≥n de `pip` [üü° Importante]

#### 1. **Introducci√≥n:**

El instalador de paquetes (`pip`) que viene por defecto suele estar desactualizado. Actual√≠zalo para evitar errores raros.

#### 2. **Ejemplo:**

```bash
python -m pip install --upgrade pip
```

#### 3. **Desarrollo:**

Solo necesario si usas `pip` est√°ndar. Si usas `uv`, puedes saltarte esto porque `uv` gestiona sus propias versiones. Haz esto justo despu√©s de activar el entorno por primera vez.

[üü° Importante]: Muchos errores de instalaci√≥n "ex√≥ticos" se solucionan simplemente teniendo `pip` al d√≠a.

---

## G - Git y .gitignore [üî¥ Fundamental]

#### 1. **Introducci√≥n:**

Jam√°s, bajo ninguna circunstancia, subas la carpeta `.venv` a GitHub. Es pesada e in√∫til para otros.

#### 2. **Ejemplo:**

```bash
echo "*" > .venv/.gitignore
```

**Explicaci√≥n:**
Este comando crea un archivo `.gitignore` _dentro_ de la carpeta `.venv` con un asterisco `*`, dici√©ndole a Git: "Ignora todo lo que hay en esta carpeta".

#### 3. **Desarrollo:**

Si usaste `uv` para crear el entorno, √©l ya hizo esto por ti (¬°punto para `uv`!). Si usaste `venv`, hazlo manualmente. Git debe ignorar el entorno virtual porque cada programador debe crear el suyo propio en su m√°quina.

[üî¥ Fundamental]: Subir el entorno virtual a un repositorio es un error de novato cl√°sico. Ev√≠talo.

---

## H - Instalaci√≥n de Paquetes (Directa) [üü° Importante]

#### 1. **Introducci√≥n:**

Con el entorno activado, instalamos las librer√≠as que necesitamos.

#### 2. **Ejemplo:**

**Usando `pip`:**

```bash
pip install "fastapi[standard]"
```

**Usando `uv`:**

```bash
uv pip install "fastapi[standard]"
```

#### 3. **Desarrollo:**

Esto descarga los archivos desde PyPI y los guarda en tu carpeta `.venv`. Si necesitas actualizar una librer√≠a o instalar una nueva, repites este paso.

[üü° Importante]: Es la acci√≥n m√°s com√∫n del d√≠a a d√≠a. Recuerda: ¬°Entorno activado primero!

---

## I - Instalaci√≥n desde `requirements.txt` [üü° Importante]

#### 1. **Introducci√≥n:**

Para instalar exactamente las mismas versiones que tus compa√±eros o que usaste en otro momento.

#### 2. **Ejemplo:**

**Contenido de `requirements.txt`:**

```text
fastapi[standard]==0.113.0
pydantic==2.8.0
```

**Comando (pip):**

```bash
pip install -r requirements.txt
```

**Comando (uv):**

```bash
uv pip install -r requirements.txt
```

#### 3. **Desarrollo:**

Es buena pr√°ctica tener un archivo donde listas qu√© paquetes necesita tu proyecto. As√≠, cualquiera puede instalar todo de golpe con un solo comando.

[üü° Importante]: Fundamental para trabajar en equipo o desplegar en servidores.

---

## J - Ejecuci√≥n del Programa [üî¥ Fundamental]

#### 1. **Introducci√≥n:**

Una vez todo instalado, corres tu script. Python usar√° autom√°ticamente las librer√≠as del entorno virtual activo.

#### 2. **Ejemplo:**

```bash
python main.py
```

#### 3. **Desarrollo:**

Como activaste el entorno, este comando `python` es el que vive dentro de `.venv`. Si intentas correr esto sin activar el entorno, fallar√° diciendo que no encuentra las librer√≠as (como FastAPI).

[üî¥ Fundamental]: Es el objetivo final de todo este proceso.

---

## K - Configuraci√≥n del Editor [üîµ Espec√≠fico]

#### 1. **Introducci√≥n:**

Tu editor de c√≥digo (VS Code, PyCharm) necesita saber que existe un entorno virtual para darte autocompletado y detectar errores.

#### 2. **Ejemplo:**

- **VS Code:** Normalmente detecta la carpeta `.venv` y te pregunta si quieres usarla. Dile que s√≠. O busca "Select Interpreter" y elige el que dice `.venv`.
- **PyCharm:** En la configuraci√≥n del int√©rprete, a√±ade uno "Existente" y apunta a tu carpeta `.venv`.

#### 3. **Desarrollo:**

Si no haces esto, tu editor marcar√° todo el c√≥digo en rojo como error, aunque el programa funcione en la terminal. Config√∫ralo una vez al inicio.

[üîµ Espec√≠fico]: Afecta tu comodidad al programar, no a la ejecuci√≥n del programa en s√≠.

---

## L - Desactivaci√≥n del Entorno [‚ö™ Raramente usado]

#### 1. **Introducci√≥n:**

Cuando terminas de trabajar, puedes "salir" del entorno virtual.

#### 2. **Ejemplo:**

```bash
deactivate
```

#### 3. **Desarrollo:**

Esto devuelve tu terminal a la normalidad (usando el Python global). No necesitas estar en una carpeta espec√≠fica para ejecutarlo.
_Nota pedag√≥gica:_ Lo marco como "Raramente usado" porque normalmente simplemente cierras la ventana de la terminal, lo cual tiene el mismo efecto.

[‚ö™ Raramente usado]: √ötil si vas a cambiar de proyecto en la _misma_ ventana de terminal.

---

## M - El "Por qu√©": El Infierno de Dependencias [üü° Importante]

#### 1. **Introducci√≥n:**

¬øPor qu√© tanto l√≠o con carpetas `.venv`? Para evitar conflictos de versiones entre proyectos.

#### 2. **Ejemplo:**

Imagina dos proyectos:

1.  `piedra-filosofal`: Necesita la librer√≠a `harry` versi√≥n **1**.
2.  `prisionero-azkaban`: Necesita la librer√≠a `harry` versi√≥n **3**.

Si instalas `harry` globalmente, solo puedes tener una versi√≥n. Si instalas la 3, rompes el proyecto 1. Si instalas la 1, rompes el proyecto 2.

#### 3. **Desarrollo:**

Los entornos virtuales permiten que `piedra-filosofal` tenga su propia carpeta con `harry v1` y `prisionero-azkaban` tenga otra carpeta con `harry v3`. Ambos coexisten felices en la misma computadora sin enterarse uno del otro.

[üü° Importante]: Entender el problema que resuelven te motivar√° a usarlos siempre.

---

## N - El "C√≥mo": Manipulaci√≥n del PATH [üîµ Espec√≠fico]

#### 1. **Introducci√≥n:**

¬øQu√© magia ocurre cuando escribes `activate`? Modifica la variable `PATH` de tu sistema temporalmente.

#### 2. **Ejemplo:**

**Antes de activar:**
PATH = `/usr/bin:/bin` (El sistema busca programas aqu√≠).

**Despu√©s de activar:**
PATH = `/ruta/a/tu/.venv/bin:/usr/bin:/bin`

#### 3. **Desarrollo:**

Al poner la ruta de tu entorno virtual **al principio** de la lista `PATH`, cuando escribes `python`, el sistema encuentra primero el ejecutable dentro de `.venv` y deja de buscar. As√≠ es como se "enga√±a" al sistema para usar el Python aislado.

[üîµ Espec√≠fico]: Conocimiento t√©cnico profundo. √ötil para entender por qu√© a veces las cosas fallan (ej. si el PATH est√° mal configurado).

---

## O - Alternativas: `uv` como Gestor Integral [üîµ Espec√≠fico]

#### 1. **Introducci√≥n:**

El texto menciona `uv` no solo como creador de entornos, sino como una herramienta "todo en uno".

#### 2. **Ejemplo:**

`uv` puede:

- Instalar Python (diferentes versiones).
- Gestionar el entorno virtual.
- Instalar paquetes y dependencias.
- Bloquear versiones (Locking) para producci√≥n.

#### 3. **Desarrollo:**

Si est√°s listo para dar el siguiente paso, herramientas como `uv` simplifican el flujo de trabajo reemplazando a `pip`, `venv` y otros gestores manuales.

[üîµ Espec√≠fico]: Es una recomendaci√≥n avanzada para cuando domines lo b√°sico.
