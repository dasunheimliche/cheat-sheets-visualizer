---
title: "2.25 - Configuraci√≥n de Path Operations en FastAPI"
description: "Gu√≠a para personalizar metadatos, estados y documentaci√≥n de tus rutas."
tags: ["fastapi", "python", "documentation", "status-code"]
---

## A - Ubicaci√≥n de la Configuraci√≥n: "En el sombrero, no en el conejo" [üî¥]

#### 1. **Introducci√≥n:**

Antes de configurar nada, debes saber que todos los par√°metros de configuraci√≥n van dentro del **decorador** (la l√≠nea que empieza con `@app...`), **nunca** en los argumentos de tu funci√≥n.

#### 2. **Ejemplo:**

```python
from fastapi import FastAPI

app = FastAPI()

# ‚úÖ CORRECTO: La configuraci√≥n va aqu√≠ arriba, en el decorador
@app.post("/items/", status_code=201)
async def create_item(name: str):
    return {"name": name}

# ‚ùå INCORRECTO: No pongas configuraciones de ruta aqu√≠ abajo
# async def create_item(name: str, status_code=201): ...
```

#### 3. **Desarrollo:**

Es vital entender que estamos configurando **la ruta** (c√≥mo FastAPI expone el endpoint al mundo), no la l√≥gica interna de tu funci√≥n. Por eso, par√°metros como el c√≥digo de estado, el t√≠tulo o la descripci√≥n se pasan al decorador (`@app.get`, `@app.post`, etc.).

üî¥ **Fundamental**: Si intentas pasar estos par√°metros a la funci√≥n `def`, Python pensar√° que son datos que el usuario debe enviar (query parameters), y tu API no funcionar√° como esperas.

---

## B - `status_code`: Definiendo el "Sem√°foro" de Respuesta [üî¥]

#### 1. **Introducci√≥n:**

Define qu√© c√≥digo HTTP (como 200, 201, 404) devolver√° tu API por defecto cuando todo salga bien.

#### 2. **Ejemplo:**

```python
from fastapi import FastAPI

app = FastAPI()

# Aqu√≠ decimos: "Si esta funci√≥n termina bien, devuelve un 201 (Created)"
@app.post("/items/", status_code=201)
async def create_item(name: str):
    return {"name": name}
```

#### 3. **Desarrollo:**

Este c√≥digo se usa en la respuesta real que recibe el cliente y tambi√©n se documenta autom√°ticamente en el esquema OpenAPI.

üî¥ **Fundamental**: Controlar el c√≥digo de estado es esencial para cumplir con los est√°ndares REST (ej: usar 201 para crear, en lugar del 200 gen√©rico).

---

## C - Constantes `status` vs. Enteros: "Memoria vs. Autocompletado" [üü°]

#### 1. **Introducci√≥n:**

Puedes escribir el n√∫mero `404` directamente o usar una constante con nombre como `status.HTTP_404_NOT_FOUND`.

#### 2. **Ejemplo:**

```python
from fastapi import FastAPI, status # Importamos status

app = FastAPI()

# OPCI√ìN 1: Usando el n√∫mero (f√°cil si te lo sabes de memoria)
@app.post("/items-num/", status_code=201)
async def create_item_num():
    return {"msg": "Created"}

# OPCI√ìN 2: Usando constantes (Recomendado)
@app.post("/items-const/", status_code=status.HTTP_201_CREATED)
async def create_item_const():
    return {"msg": "Created"}
```

#### 3. **Desarrollo:**

Aqu√≠ tenemos una comparaci√≥n importante.

- **Usar Enteros (`201`):** Es r√°pido de escribir si conoces los c√≥digos de memoria.
- **Usar Constantes (`status.HTTP_201_CREATED`):** Es m√°s verboso, pero mucho m√°s seguro y legible.

**¬øPor qu√© elegir uno sobre el otro?**
Yo, como tu instructor paranoico, te recomiendo encarecidamente usar **`status`**. ¬øPor qu√©? Porque los editores de c√≥digo tienen autocompletado. Si no recuerdas si el error "Teapot" es el 418, puedes escribir `status.HTTP_` y el editor te lo dir√°. Adem√°s, hace que tu c√≥digo sea legible para humanos que no memorizan n√∫meros.

_Nota t√©cnica:_ `fastapi.status` es en realidad lo mismo que `starlette.status`. FastAPI te lo ofrece por comodidad para que no tengas que importar Starlette directamente.

üü° **Importante**: Mejora la legibilidad y reduce errores humanos al elegir c√≥digos.

---

## D - `tags`: Organizando tus Rutas en Carpetas [üü°]

#### 1. **Introducci√≥n:**

Las etiquetas (`tags`) sirven para agrupar operaciones relacionadas en la documentaci√≥n autom√°tica, creando secciones visuales separadas.

#### 2. **Ejemplo:**

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    price: float

# Estas dos rutas aparecer√°n bajo el t√≠tulo "items" en la documentaci√≥n
@app.post("/items/", tags=["items"])
async def create_item(item: Item):
    return item

@app.get("/items/", tags=["items"])
async def read_items():
    return [{"name": "Foo", "price": 42}]

# Esta ruta aparecer√° bajo el t√≠tulo "users"
@app.get("/users/", tags=["users"])
async def read_users():
    return [{"username": "johndoe"}]
```

#### 3. **Desarrollo:**

Pasas una lista de strings (`list[str]`). En la interfaz gr√°fica (Swagger UI), esto crea encabezados grandes y agrupa tus endpoints. Sin esto, si tienes 50 rutas, tu documentaci√≥n ser√° una lista interminable y desordenada.

**Resultado visual:**
![Tags en la documentaci√≥n](https://fastapi.tiangolo.com/img/tutorial/path-operation-configuration/image01.png)

üü° **Importante**: Indispensable para mantener la documentaci√≥n ordenada en aplicaciones medianas o grandes.

---

## E - `Enum` en Tags: Evitando el caos de los "Typos" [üîµ]

#### 1. **Introducci√≥n:**

Para evitar escribir "users" en una ruta y "user" (singular) en otra por error, creando dos grupos distintos, usa un `Enum`.

#### 2. **Ejemplo:**

```python
from enum import Enum
from fastapi import FastAPI

app = FastAPI()

# Definimos las etiquetas permitidas
class Tags(Enum):
    items = "items"
    users = "users"

# Usamos la referencia al Enum, no el string manual
@app.get("/items/", tags=[Tags.items])
async def get_items():
    return ["Portal gun"]

@app.get("/users/", tags=[Tags.users])
async def read_users():
    return ["Rick"]
```

#### 3. **Desarrollo:**

En aplicaciones grandes, acumular√°s muchas etiquetas. Usar un `Enum` garantiza consistencia. Si te equivocas al escribir `Tags.itms`, Python te dar√° un error antes de ejecutar, mientras que si escribes el string `"itms"` (mal escrito), FastAPI crear√° una categor√≠a nueva y fea en tu documentaci√≥n sin avisarte.

üîµ **Espec√≠fico**: Altamente recomendado para proyectos grandes o equipos de trabajo.

---

## F - `summary` y `description`: Poniendo T√≠tulo y Cuerpo [üü°]

#### 1. **Introducci√≥n:**

Puedes a√±adir un t√≠tulo corto (`summary`) y una explicaci√≥n larga (`description`) a cada ruta para que aparezcan en la documentaci√≥n.

#### 2. **Ejemplo:**

```python
@app.post(
    "/items/",
    summary="Crear un √≠tem",
    description="Crea un √≠tem con toda la info: nombre, precio, impuestos, etc.",
)
async def create_item(item: Item):
    return item
```

#### 3. **Desarrollo:**

- **Summary:** Aparece junto al m√©todo HTTP y la ruta en la lista principal de la documentaci√≥n. Debe ser muy breve.
- **Description:** Aparece cuando despliegas los detalles del endpoint. Puede ser tan largo como necesites.

üü° **Importante**: Una API sin descripciones es como un mueble de IKEA sin instrucciones. Funciona, pero nadie sabr√° c√≥mo usarlo.

---

## G - Docstrings: La forma "M√°gica" de Documentar [üü°]

#### 1. **Introducci√≥n:**

En lugar de usar el par√°metro `description`, puedes escribir la descripci√≥n directamente dentro de la funci√≥n usando un **docstring** (comentario de triple comilla), y FastAPI lo leer√° autom√°ticamente.

#### 2. **Ejemplo:**

```python
@app.post("/items/", summary="Crear un √≠tem")
async def create_item(item: Item):
    """
    Crea un √≠tem con toda la informaci√≥n:

    - **name**: cada √≠tem debe tener un nombre
    - **description**: una descripci√≥n larga
    - **price**: requerido
    """
    return item
```

#### 3. **Desarrollo:**

Esta es la forma preferida por muchos desarrolladores (incluy√©ndome) porque mantiene la documentaci√≥n cerca del c√≥digo.
Adem√°s, **soporta Markdown**. Puedes usar listas, negritas, cursivas, etc., y se renderizar√°n correctamente en la interfaz visual.

**Resultado visual:**
![Descripci√≥n desde docstring](https://fastapi.tiangolo.com/img/tutorial/path-operation-configuration/image02.png)

üü° **Importante**: Aprovecha el soporte de Markdown para hacer tu documentaci√≥n legible y profesional.

---

## H - `response_description`: Documentando la Salida [üîµ]

#### 1. **Introducci√≥n:**

Especifica una descripci√≥n textual de lo que la API devuelve (la respuesta), separada de la descripci√≥n general de la operaci√≥n.

#### 2. **Ejemplo:**

```python
@app.post(
    "/items/",
    response_description="El √≠tem creado", # <--- Descripci√≥n de la RESPUESTA
    summary="Crear un √≠tem",               # <--- Descripci√≥n de la OPERACI√ìN
)
async def create_item(item: Item):
    return item
```

#### 3. **Desarrollo:**

No confundas `description` (qu√© hace la funci√≥n) con `response_description` (qu√© datos obtengo de vuelta).
OpenAPI requiere una descripci√≥n de la respuesta. Si no pones una, FastAPI pondr√° "Successful Response" por defecto. Usar este par√°metro te permite ser m√°s espec√≠fico, ej: "Objeto JSON con el ID del usuario creado".

**Resultado visual:**
![Descripci√≥n de respuesta](https://fastapi.tiangolo.com/img/tutorial/path-operation-configuration/image03.png)

üîµ **Espec√≠fico**: √ötil para pulir la documentaci√≥n al m√°ximo detalle.

---

## I - `deprecated`: Marcando lo Viejo sin Borrarlo [üîµ]

#### 1. **Introducci√≥n:**

Si quieres dejar de usar una ruta pero no puedes borrarla todav√≠a (porque algunos clientes la siguen usando), m√°rcala como `deprecated=True`.

#### 2. **Ejemplo:**

```python
@app.get("/elements/", tags=["items"], deprecated=True)
async def read_elements():
    return [{"item_id": "Foo"}]
```

#### 3. **Desarrollo:**

Esto no desactiva la ruta; sigue funcionando perfectamente. Sin embargo, en la documentaci√≥n aparecer√° tachada y con un distintivo gris. Es la forma educada de decirle a tus usuarios: "Esto va a desaparecer pronto, deja de usarlo".

**Resultado visual:**
![Ruta obsoleta](https://fastapi.tiangolo.com/img/tutorial/path-operation-configuration/image04.png)
![Comparaci√≥n normal vs obsoleta](https://fastapi.tiangolo.com/img/tutorial/path-operation-configuration/image05.png)

üîµ **Espec√≠fico**: Vital para el mantenimiento de APIs a largo plazo sin romper la compatibilidad.
