---
title: "2.11 - Declaraci√≥n de Ejemplos en FastAPI"
description: "C√≥mo documentar tu API con ejemplos de datos claros para el usuario"
tags: ["fastapi", "pydantic", "documentation", "openapi"]
---

## A - Ejemplos Globales en el Modelo (Pydantic v2) [üî¥]

#### 1. Introducci√≥n:

Es la forma m√°s ordenada de decir: "As√≠ se ve un objeto completo de este tipo". Se define una sola vez dentro de tu clase y sirve para toda la API.

#### 2. Ejemplo:

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None

    # Aqu√≠ est√° la magia para Pydantic v2
    model_config = {
        "json_schema_extra": {
            "examples": [
                {
                    "name": "Foo",
                    "description": "Un item muy bonito",
                    "price": 35.4,
                    "tax": 3.2,
                }
            ]
        }
    }

@app.put("/items/{item_id}")
async def update_item(item_id: int, item: Item):
    return {"item_id": item_id, "item": item}
```

**Explicaci√≥n del ejemplo:**
Dentro de la clase `Item`, usamos un diccionario especial llamado `model_config`. Dentro, configuramos `json_schema_extra` y le pasamos una lista de `examples`. Esto le dice a la documentaci√≥n autom√°tica: "Usa estos datos para pre-llenar el ejemplo en la interfaz".

#### 3. Desarrollo:

[üî¥ Fundamental]: Es la forma est√°ndar en las versiones modernas de FastAPI y Pydantic.

**¬°Ojo aqu√≠!** Est√°s modificando el **JSON Schema**. Esto significa que esta informaci√≥n viaja pegada a la definici√≥n de tu modelo de datos. Es muy √∫til porque cualquier ruta (`endpoint`) que use este modelo `Item` heredar√° autom√°ticamente este ejemplo. No tienes que escribirlo una y otra vez.

---

## B - Ejemplos Globales en el Modelo (Pydantic v1 / Legacy) [‚ö™]

#### 1. Introducci√≥n:

Es la forma antigua de hacer lo mismo que en el punto A. Solo necesitas saber esto si te encuentras con c√≥digo viejo o tutoriales desactualizados.

#### 2. Ejemplo:

```python
class Item(BaseModel):
    name: str
    price: float

    # Forma ANTIGUA (Pydantic v1)
    class Config:
        schema_extra = {
            "examples": [
                {"name": "Foo", "price": 35.4}
            ]
        }
```

#### 3. Desarrollo:

[‚ö™ Raramente usado]: Si est√°s empezando un proyecto nuevo hoy, **no uses esto**. Usa la opci√≥n A (`model_config`). Lo incluyo solo para que no entres en p√°nico si ves una clase `Config` en c√≥digo ajeno. FastAPI y Pydantic han evolucionado.

---

## C - Ejemplos Granulares con `Field` [üü°]

#### 1. Introducci√≥n:

En lugar de dar un ejemplo de todo el objeto junto, defines un ejemplo para cada propiedad individualmente.

#### 2. Ejemplo:

```python
from pydantic import BaseModel, Field

class Item(BaseModel):
    # Nota que 'examples' es una LISTA, aunque pongas solo uno
    name: str = Field(examples=["Foo"])
    description: str | None = Field(default=None, examples=["Un item genial"])
    price: float = Field(examples=[35.4])
```

#### 3. Desarrollo:

[üü° Importante]: A veces no quieres crear un ejemplo gigante de todo el objeto, o quiz√°s quieres que cada campo tenga su propia data de muestra independiente.

**La trampa com√∫n:** F√≠jate que el argumento se llama `examples` (plural) y recibe una lista `[]`, incluso si solo pones un valor. Antes exist√≠a `example` (singular), pero est√° obsoleto. ¬°Usa siempre listas!

---

## D - Ejemplos en el `Body` (JSON Schema) [üîµ]

#### 1. Introducci√≥n:

Aqu√≠ defines el ejemplo directamente en la ruta (endpoint), no en el modelo. √ötil si el mismo modelo necesita ejemplos diferentes seg√∫n la ruta.

#### 2. Ejemplo:

```python
from typing import Annotated
from fastapi import Body, FastAPI

# ... (definici√≥n de Item) ...

@app.put("/items/{item_id}")
async def update_item(
    item_id: int,
    item: Annotated[
        Item,
        Body(
            examples=[
                {
                    "name": "Foo",
                    "description": "Ejemplo espec√≠fico para esta ruta",
                    "price": 35.4,
                    "tax": 3.2,
                }
            ],
        ),
    ],
):
    return item
```

#### 3. Desarrollo:

[üîµ Espec√≠fico]: Usamos `Body()` dentro de `Annotated`. Esto inyecta la informaci√≥n en el **JSON Schema** de esa ruta espec√≠fica.

**El problema visual:** Aunque el est√°ndar JSON Schema permite pasar m√∫ltiples ejemplos en esa lista, la herramienta visual que todos usamos (**Swagger UI**) a veces no es capaz de mostrar una lista desplegable con ellos si los declaras de esta forma. Si necesitas mostrar varios ejemplos seleccionables en la documentaci√≥n, ve directo al concepto **F**.

**As√≠ se ve en la documentaci√≥n:**
![](https://fastapi.tiangolo.com/img/tutorial/body-fields/image01.png)

---

## E - `openapi_examples`: La Soluci√≥n para M√∫ltiples Ejemplos [üî¥]

#### 1. Introducci√≥n:

Esta es la herramienta pesada. Si quieres que tu documentaci√≥n tenga un men√∫ desplegable con varios casos de uso (ej: "Caso Normal", "Caso Error", "Caso Extremo"), usa esto.

#### 2. Ejemplo:

```python
@app.put("/items/{item_id}")
async def update_item(
    item_id: int,
    item: Annotated[
        Item,
        Body(
            # F√≠jate que ahora usamos 'openapi_examples', NO 'examples'
            openapi_examples={
                "normal": {
                    "summary": "Un ejemplo normal",
                    "description": "Un item que funciona correctamente.",
                    "value": {
                        "name": "Foo",
                        "price": 35.4,
                    },
                },
                "invalid": {
                    "summary": "Datos inv√°lidos",
                    "description": "Esto provocar√° un error.",
                    "value": {
                        "name": "Baz",
                        "price": "treinta",
                    },
                },
            },
        ),
    ],
):
    return item
```

#### 3. Desarrollo:

[üî¥ Fundamental]: Si quieres documentaci√≥n profesional, esta es la clave.

**Diferencia Cr√≠tica: `examples` vs `openapi_examples`**

- **`examples` (Concepto D):** Es parte del est√°ndar **JSON Schema**. Es simple (una lista de datos). El problema es que Swagger UI (la interfaz gr√°fica) a veces no sabe c√≥mo renderizar m√∫ltiples opciones de esto.
- **`openapi_examples` (Concepto E):** Es parte del est√°ndar **OpenAPI** (que envuelve a JSON Schema). Es un diccionario donde cada clave es un caso de uso. Permite a√±adir `summary` (t√≠tulo corto) y `description` (texto largo). **Swagger UI ama esto** y crear√° un men√∫ desplegable precioso.

**As√≠ se ve el resultado en la UI:**
![](https://fastapi.tiangolo.com/img/tutorial/body-fields/image02.png)

---

## F - Estructura de un `openapi_example` [üîµ]

#### 1. Introducci√≥n:

Desglose r√°pido de qu√© puedes poner dentro de cada ejemplo en el diccionario de `openapi_examples`.

#### 2. Ejemplo:

```python
"nombre_del_caso": {
    "summary": "T√≠tulo corto para el dropdown",
    "description": "Explicaci√≥n larga (acepta **Markdown**)",
    "value": { "campo": "valor real del ejemplo" },
    # "externalValue": "http://url-al-ejemplo.com" (Raramente usado)
}
```

#### 3. Desarrollo:

[üîµ Espec√≠fico]:

- **summary**: Lo que el usuario ve en la lista desplegable.
- **description**: Contexto adicional.
- **value**: El objeto JSON real que se copiar√° en la petici√≥n de prueba.

---

## G - Contexto T√©cnico: ¬øPor qu√© hay dos formas? [‚ö™]

#### 1. Introducci√≥n:

Una breve historia para que entiendas por qu√© existen `examples` (en JSON Schema) y `openapi_examples` (en OpenAPI).

#### 2. Desarrollo:

[‚ö™ Raramente usado]: Solo lectura para curiosos.
Antiguamente, **JSON Schema** no ten√≠a soporte para ejemplos, as√≠ que **OpenAPI** invent√≥ su propia forma (`openapi_examples`).
Luego, JSON Schema se actualiz√≥ y a√±adi√≥ su propio campo `examples`.
Hoy en d√≠a, FastAPI soporta ambos.

1.  Usa `examples` (Concepto A o D) para validaci√≥n simple y esquemas.
2.  Usa `openapi_examples` (Concepto E) cuando quieras "lucirte" en la documentaci√≥n con m√∫ltiples opciones seleccionables.
