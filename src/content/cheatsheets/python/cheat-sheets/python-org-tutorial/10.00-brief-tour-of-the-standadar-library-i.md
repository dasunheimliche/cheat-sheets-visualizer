---
title: "10.0 - Tour por la Librer√≠a Est√°ndar de Python"
description: "Gu√≠a esencial de los m√≥dulos incluidos en Python para tareas comunes"
tags: ["python", "standard library", "os", "sys", "math", "testing"]
prompt-version: cheat-sheet-generator-1.1
---

## A - El M√≥dulo `os`: Hablando con tu Sistema Operativo [üî¥]

#### 1. **Introducci√≥n:**

El m√≥dulo `os` te permite interactuar con el sistema operativo (Windows, Mac, Linux) para ver en qu√© carpeta est√°s, cambiar de carpeta o ejecutar comandos del sistema.

#### 2. **Ejemplo:**

```python
import os

# ¬øEn qu√© carpeta estoy ahora mismo?
print(os.getcwd())
# Salida: 'C:\\Python314' (o la ruta donde est√©s)

# Cambiar a otra carpeta
os.chdir('/server/accesslogs')

# Ejecutar un comando de la terminal (shell) desde Python
os.system('mkdir today')
```

#### 3. **Desarrollo:**

[üî¥ Fundamental]: Es la herramienta b√°sica para que tu script no viva aislado, sino que pueda moverse por las carpetas de tu computadora.

---

## B - La Trampa del `import os`: ¬°Cuidado con `open()`! [üî¥]

#### 1. **Introducci√≥n:**

Jam√°s uses `from os import *`. Siempre usa `import os`. Si no me haces caso, romper√°s la funci√≥n b√°sica de abrir archivos.

#### 2. **Ejemplo:**

```python
# ‚ùå MAL: Esto es peligroso
from os import *
# Ahora la funci√≥n open() ya no es la de Python para leer archivos de texto,
# sino la os.open() que es mucho m√°s compleja y diferente.

# ‚úÖ BIEN: Mant√©n los espacios de nombres limpios
import os
# Usas os.open() si quieres la del sistema, y open() si quieres leer un archivo normal.
```

#### 3. **Desarrollo:**

[üî¥ Fundamental]: Soy paranoico con esto porque es un error muy com√∫n de principiante. `os.open()` y el `open()` nativo de Python funcionan muy diferente. Al importar todo con `*`, el `open` de `os` "tapa" (hace _shadowing_) al `open` normal, y tus scripts de lectura de archivos dejar√°n de funcionar misteriosamente.

---

## C - Explorando M√≥dulos: `dir()` y `help()` [üü°]

#### 1. **Introducci√≥n:**

Si est√°s perdido y no sabes qu√© hace un m√≥dulo o qu√© funciones tiene, Python tiene dos "linternas" integradas para iluminar el camino.

#### 2. **Ejemplo:**

```python
import os

# 1. dir(modulo): Me da una LISTA de todo lo que hay dentro
print(dir(os))
# Salida: ['abort', 'access', ..., 'getcwd', ...]

# 2. help(modulo): Me da el MANUAL completo (documentaci√≥n)
help(os)
# Salida: Muestra una p√°gina de manual detallada creada a partir de los docstrings.
```

---

## D - `shutil`: Gesti√≥n de Archivos para Humanos [üü°]

#### 1. **Introducci√≥n:**

Mientras que `os` es un poco "tosco" para mover archivos, `shutil` (Shell Utilities) es tu amigo amigable para copiar, mover y gestionar archivos diariamente.

#### 2. **Ejemplo:**

```python
import shutil

# Copiar un archivo
shutil.copyfile('datos.db', 'archivo_guardado.db')

# Mover un archivo de una carpeta a otra
shutil.move('/build/ejecutables', 'carpeta_instalacion')
```

#### 3. **Desarrollo:**

**COMPARACI√ìN: `os` vs `shutil`**

- Usa **`os`** cuando necesites hablar con el sistema (rutas, procesos, carpetas actuales).
- Usa **`shutil`** cuando necesites manipular archivos f√≠sicos (copiar, pegar, mover, borrar √°rboles de directorios). Es de "m√°s alto nivel" (m√°s f√°cil).

---

## E - `glob`: Buscando Archivos con Comodines [üîµ]

#### 1. **Introducci√≥n:**

Si necesitas hacer una lista de todos los archivos que terminan en `.py` o `.jpg`, `glob` es la herramienta perfecta.

#### 2. **Ejemplo:**

```python
import glob

# Dame una lista de todos los archivos que terminan en .py
archivos_python = glob.glob('*.py')
print(archivos_python)
# Salida: ['primes.py', 'random.py', 'quote.py']
```

---

## F - Argumentos de L√≠nea de Comandos: `sys.argv` [üü°]

#### 1. **Introducci√≥n:**

Es la forma m√°s cruda y directa de leer lo que escribes en la terminal despu√©s del nombre de tu script.

#### 2. **Ejemplo:**

```python
# Archivo: demo.py
import sys
print(sys.argv)

# Si ejecutas en la terminal:
# python demo.py uno dos tres

# La salida ser√° una lista:
# ['demo.py', 'uno', 'dos', 'tres']
```

#### 3. **Desarrollo:**

[üü° Importante]: Nota que el primer elemento (`sys.argv[0]`) siempre es el nombre del propio script. Los argumentos reales empiezan en el √≠ndice 1.

---

## G - Argumentos de L√≠nea de Comandos: `argparse` [üîµ]

#### 1. **Introducci√≥n:**

Si quieres que tu script se vea profesional, con ayuda autom√°tica (`--help`) y validaci√≥n de tipos, usa `argparse` en lugar de `sys.argv`.

#### 2. **Ejemplo:**

```python
import argparse

# 1. Crear el parser
parser = argparse.ArgumentParser(prog='top', description='Muestra lineas de archivos')

# 2. Definir qu√© argumentos esperamos
parser.add_argument('nombres_archivos', nargs='+')           # Uno o m√°s archivos
parser.add_argument('-l', '--lines', type=int, default=10)   # Opcional, es un n√∫mero

# 3. Procesar lo que el usuario escribi√≥
args = parser.parse_args()

print(args)
```

_Si ejecutas: `python top.py --lines=5 alpha.txt beta.txt`_
_El resultado en `args` ser√°: `lines=5` y `nombres_archivos=['alpha.txt', 'beta.txt']`_

#### 3. **Desarrollo:**

**COMPARACI√ìN: `sys.argv` vs `argparse`**

- **`sys.argv`**: √ösalo para scripts r√°pidos y sucios donde solo t√∫ sabes qu√© pasarle. Es solo una lista de cadenas.
- **`argparse`**: √ösalo para herramientas serias. Convierte tipos (de texto a `int`), genera mensajes de ayuda si el usuario se equivoca y maneja opciones complejas.

---

## H - `sys.stderr` y `sys.exit`: Errores y Salidas [üîµ]

#### 1. **Introducci√≥n:**

A veces quieres imprimir un error pero no quieres que se mezcle con la salida normal de tu programa, o quieres matar el programa inmediatamente.

#### 2. **Ejemplo:**

```python
import sys

# Escribir en el canal de ERRORES (√∫til si rediriges la salida normal a un archivo)
sys.stderr.write('Advertencia: archivo log no encontrado\n')

# Terminar el script inmediatamente
sys.exit()
```

---

## I - `re`: Expresiones Regulares (Regex) [üîµ]

#### 1. **Introducci√≥n:**

El m√≥dulo `re` es para b√∫squedas y manipulaciones de texto avanzadas y complejas usando patrones.

#### 2. **Ejemplo:**

```python
import re

# Buscar todas las palabras que empiezan con 'f'
print(re.findall(r'\bf[a-z]*', 'which foot or hand fell fastest'))
# Salida: ['foot', 'fell', 'fastest']

# Reemplazar palabras repetidas (ej: "the the" -> "the")
print(re.sub(r'(\b[a-z]+) \1', r'\1', 'cat in the the hat'))
# Salida: 'cat in the hat'
```

---

## J - M√©todos de String vs. Regex: Elige tu Batalla [üü°]

#### 1. **Introducci√≥n:**

No uses una bazuca para matar un mosquito. Si la manipulaci√≥n es simple, usa los m√©todos propios de las cadenas (`str`), son m√°s r√°pidos y f√°ciles de leer.

#### 2. **Ejemplo:**

```python
# ‚úÖ BIEN: Simple y legible
'tea for too'.replace('too', 'two')

# ‚ùå INNECESARIAMENTE COMPLEJO: Usar regex para un reemplazo simple
import re
re.sub('too', 'two', 'tea for too')
```

#### 3. **Desarrollo:**

[üü° Importante]: Solo usa `re` cuando los m√©todos como `.replace()`, `.split()` o `.find()` se queden cortos.

---

## K - Matem√°ticas: `math` y `random` [üü°]

#### 1. **Introducci√≥n:**

Python trae bater√≠as incluidas para c√°lculos matem√°ticos (`math`) y para generar azar (`random`).

#### 2. **Ejemplo:**

```python
import math
import random

# Matem√°ticas
math.cos(math.pi / 4)  # 0.7071...
math.log(1024, 2)      # 10.0

# Azar
random.choice(['manzana', 'pera', 'banana']) # Elige uno al azar
random.sample(range(100), 10)  # Elige 10 n√∫meros √∫nicos del 0 al 99
random.random()      # Float aleatorio entre 0.0 y 1.0
random.randrange(6)  # Entero aleatorio entre 0 y 5
```

---

## L - Estad√≠stica B√°sica: `statistics` [üîµ]

#### 1. **Introducci√≥n:**

Para c√°lculos estad√≠sticos b√°sicos (media, mediana, varianza) sin instalar librer√≠as externas pesadas.

#### 2. **Ejemplo:**

```python
import statistics

data = [2.75, 1.75, 1.25, 0.25, 0.5, 1.25, 3.5]

statistics.mean(data)     # Media (Promedio): 1.607...
statistics.median(data)   # Mediana: 1.25
statistics.variance(data) # Varianza: 1.37...
```

---

## M - Acceso a Internet: `urllib` y `smtplib` [üîµ]

#### 1. **Introducci√≥n:**

Python permite descargar datos de la web y enviar correos electr√≥nicos de forma nativa.

#### 2. **Ejemplo:**

```python
from urllib.request import urlopen
import smtplib

# 1. Leer una p√°gina web
with urlopen('https://docs.python.org/3/') as response:
    for line in response:
        line = line.decode() # Convertir bytes a texto
        if 'updated' in line:
            print(line.strip())

# 2. Enviar un correo (requiere servidor SMTP local o configurado)
server = smtplib.SMTP('localhost')
server.sendmail('yo@ejemplo.com', 'tu@ejemplo.com', "Mensaje...")
server.quit()
```

---

## N - Fechas y Tiempos: `datetime` [üü°]

#### 1. **Introducci√≥n:**

El m√≥dulo `datetime` maneja fechas de forma inteligente, permitiendo aritm√©tica (sumar/restar d√≠as) y formateo de texto.

#### 2. **Ejemplo:**

```python
from datetime import date

# Obtener fecha de hoy
now = date.today()

# Formatear fecha a texto bonito
# %m=mes, %d=d√≠a, %y=a√±o corto, %A=D√≠a semana, %B=Nombre mes
print(now.strftime("%m-%d-%y. %d %b %Y is a %A"))

# Aritm√©tica de fechas (Calcular edad en d√≠as)
birthday = date(1964, 7, 31)
age = now - birthday
print(age.days) # Salida: 14368 (ejemplo)
```

---

## O - Compresi√≥n de Datos: `zlib` y amigos [üîµ]

#### 1. **Introducci√≥n:**

Python soporta muchos formatos de compresi√≥n (`zlib`, `gzip`, `bz2`, `lzma`, `zipfile`, `tarfile`). Aqu√≠ un ejemplo con `zlib`.

#### 2. **Ejemplo:**

```python
import zlib

s = b'witch which has which witches wrist watch' # Nota la 'b' para bytes
print(len(s)) # 41 bytes

t = zlib.compress(s)
print(len(t)) # 37 bytes (¬°Se comprimi√≥!)

print(zlib.decompress(t)) # Volver al original
print(zlib.crc32(s))      # Checksum para verificar integridad
```

---

## P - Rendimiento: `timeit` [üîµ]

#### 1. **Introducci√≥n:**

¬øTienes curiosidad de qu√© forma de escribir c√≥digo es m√°s r√°pida? No adivines, usa `timeit`.

#### 2. **Ejemplo:**

```python
from timeit import Timer

# Comparando intercambio de variables:
# Opci√≥n A: Usando variable temporal (estilo C)
Timer('t=a; a=b; b=t', 'a=1; b=2').timeit()
# Salida: 0.57 segundos

# Opci√≥n B: Empaquetado de tuplas (estilo Python)
Timer('a,b = b,a', 'a=1; b=2').timeit()
# Salida: 0.54 segundos (¬°M√°s r√°pido!)
```

#### 3. **Desarrollo:**

[üîµ Espec√≠fico]: Para medir bloques de c√≥digo peque√±os usa `timeit`. Si necesitas analizar un programa entero para ver d√≥nde es lento, existen los m√≥dulos `profile` y `pstats`.

---

## Q - Calidad del C√≥digo: `doctest` [üü°]

#### 1. **Introducci√≥n:**

`doctest` te permite escribir pruebas directamente en la documentaci√≥n (docstring) de tu funci√≥n. Sirve como ejemplo para el humano y como test para la m√°quina.

#### 2. **Ejemplo:**

```python
def average(values):
    """Calcula el promedio.

    >>> print(average([20, 30, 70]))
    40.0
    """
    return sum(values) / len(values)

import doctest
doctest.testmod() # Valida autom√°ticamente que el ejemplo del comentario sea real
```

---

## R - Calidad del C√≥digo: `unittest` [üîµ]

#### 1. **Introducci√≥n:**

Para pruebas m√°s complejas y exhaustivas, `unittest` permite crear archivos de prueba separados, similar a JUnit en Java.

#### 2. **Ejemplo:**

```python
import unittest

class TestFunciones(unittest.TestCase):
    def test_average(self):
        self.assertEqual(average([20, 30, 70]), 40.0)
        with self.assertRaises(ZeroDivisionError):
            average([]) # Probar que falla correctamente si la lista est√° vac√≠a

unittest.main() # Ejecuta todas las pruebas
```

#### 3. **Desarrollo:**

**COMPARACI√ìN: `doctest` vs `unittest`**

- **`doctest`**: Perfecto para documentaci√≥n viva y ejemplos simples. Mantiene la documentaci√≥n honesta.
- **`unittest`**: La herramienta robusta para asegurar la calidad del software. Permite configuraciones complejas y validaci√≥n de casos borde.

---

## S - Bater√≠as Incluidas: Potencia Extra [üîµ]

#### 1. **Introducci√≥n:**

Python se enorgullece de venir con "bater√≠as incluidas", paquetes robustos para tareas complejas sin instalar nada extra.

#### 2. **Desarrollo:**

- **`xmlrpc.client` / `xmlrpc.server`**: Para llamadas a procedimientos remotos (RPC) de forma casi trivial.
- **`email`**: **OJO AQU√ç**. A diferencia de `smtplib` (que _env√≠a_ el correo), el paquete `email` es para **construir** y **decodificar** correos complejos (adjuntos, cabeceras, MIME).
- **`json`**: Para leer y escribir formato JSON (muy popular en web).
- **`csv`**: Para leer y escribir archivos separados por comas (Excel, bases de datos).
- **`sqlite3`**: Una base de datos SQL completa en un solo archivo, integrada en Python.
- **Internacionalizaci√≥n**: `gettext`, `locale`, `codecs` para que tu app funcione en m√∫ltiples idiomas.
