---
title: "8.0 - Errores y Excepciones en Python"
description: "Gu铆a completa para manejar errores, evitar colapsos y limpiar recursos en Python"
tags: ["python", "errors", "exceptions", "try-except"]
prompt-version: cheat-sheet-generator-1.1
---

## A - Errores de Sintaxis vs. Excepciones []

#### 1. **Introducci贸n:**

Hay dos tipos de "problemas": cuando escribes mal el c贸digo (Sintaxis) y cuando el c贸digo est谩 bien escrito pero intenta hacer algo imposible (Excepci贸n).

#### 2. **Ejemplo:**

```python
# 1. Error de Sintaxis (El programa NI SIQUIERA arranca)
while True print('Hola')
# SyntaxError: invalid syntax (falta los dos puntos ':')

# 2. Excepci贸n (El programa arranca, pero falla en esta l铆nea)
10 * (1/0)
# ZeroDivisionError: division by zero
```

#### 3. **Desarrollo:**

- **Syntax Errors (Errores de Parsing):** Son como errores gramaticales. Python no sabe c贸mo leer tu c贸digo. Te muestra una flechita `^` apuntando donde cree que est谩 el fallo (a veces el fallo est谩 justo antes de la flecha).
- **Exceptions (Excepciones):** Tu "gram谩tica" es perfecta, pero la acci贸n falla (ej: dividir por cero, sumar texto con n煤meros). Si no las manejas, el programa se detiene y muestra un "Traceback" (el historial de qu茅 pas贸).

 **Fundamental**: Debes distinguir si tu programa no corre porque lo escribiste mal (Sintaxis) o porque la l贸gica fall贸 (Excepci贸n).

## B - Manejo B谩sico: `try` y `except` []

#### 1. **Introducci贸n:**

Es tu red de seguridad. Intentas (`try`) ejecutar c贸digo peligroso, y si falla, capturas (`except`) el error para que el programa no muera.

#### 2. **Ejemplo:**

```python
while True:
    try:
        x = int(input("Introduce un n煤mero: "))
        break # Si llegamos aqu铆, todo sali贸 bien, salimos del loop
    except ValueError:
        # Si int() falla, saltamos aqu铆 inmediatamente
        print("隆Ups! Eso no es un n煤mero v谩lido. Intenta de nuevo...")
```

#### 3. **Desarrollo:**

El flujo es vital entenderlo:

1.  Se ejecuta el bloque `try`.
2.  Si **NO** hay error: se salta el bloque `except` y se contin煤a.
3.  Si **HAY** error: Se detiene el `try` inmediatamente. Si el error coincide con el tipo que pusiste en `except` (ej: `ValueError`), se ejecuta ese bloque.
4.  Si el error **NO** coincide: El error sube hacia arriba (y si nadie lo atrapa, el programa explota).

 **Fundamental**: Es la estructura base para que tus programas sean robustos y no se cierren ante el primer error del usuario.

## C - M煤ltiples `except` y Tuplas []

#### 1. **Introducci贸n:**

Puedes tener varias redes de seguridad para distintos tipos de ca铆das, o una sola red grande para varios tipos a la vez.

#### 2. **Ejemplo:**

```python
try:
    # C贸digo peligroso
    pass
except RuntimeError:
    print("Error de ejecuci贸n")
except (TypeError, NameError): # Tupla: Atrapa TypeError O NameError
    print("Error de tipo o de nombre")
except ValueError:
    print("Error de valor")
```

#### 3. **Desarrollo:**

Solo se ejecutar谩 **un** manejador (el primero que coincida).

- Puedes apilar varios `except` uno tras otro.
- Puedes usar par茅ntesis `(ErrorA, ErrorB)` para agrupar varios errores en una misma respuesta.

 **Importante**: Permite dar respuestas espec铆ficas seg煤n qu茅 sali贸 mal, en lugar de un mensaje gen茅rico de "algo fall贸".

## D - La Trampa de la Herencia en `except` []

#### 1. **Introducci贸n:**

隆Cuidado! Si capturas una Clase Padre (Base), autom谩ticamente capturas a todas sus Clases Hijas (Derivadas). El orden importa.

#### 2. **Ejemplo:**

```python
class B(Exception): pass
class C(B): pass        # C hereda de B

# FORMA INCORRECTA (B atrapa todo porque es el padre)
try:
    raise C()
except B:
    print("Atrap茅 B (o una hija de B)") # Se ejecutar谩 esto
except C:
    print("Atrap茅 C") # Nunca llegar谩 aqu铆 porque B ya lo atrap贸

# FORMA CORRECTA (Lo espec铆fico primero)
try:
    raise C()
except C:
    print("Atrap茅 C") # Ahora s铆
except B:
    print("Atrap茅 B")
```

#### 3. **Desarrollo:**

Las excepciones son clases. Una cl谩usula `except` coincide si el error es de esa clase **o de una clase derivada**.

- **Regla de Oro:** Pon siempre las excepciones m谩s espec铆ficas (hijas) primero y las m谩s generales (padres) al final.

 **Espec铆fico**: Es un error com煤n cuando creas tus propias excepciones o usas librer铆as complejas.

## E - Accediendo al Detalle del Error (`as`) []

#### 1. **Introducci贸n:**

A veces necesitas saber _qu茅_ pas贸 exactamente, no solo _qu茅 tipo_ de error fue. Usamos `as` para guardar el error en una variable.

#### 2. **Ejemplo:**

```python
try:
    raise Exception('spam', 'huevos')
except Exception as inst:
    print(type(inst))    # <class 'Exception'>
    print(inst.args)     # ('spam', 'huevos')
    print(inst)          # Imprime los argumentos directamente
```

#### 3. **Desarrollo:**

La variable (en el ejemplo `inst`) es la instancia de la excepci贸n. Normalmente tiene un atributo `.args` con los detalles. Al imprimir la instancia directamente (`print(inst)`), Python suele mostrar el mensaje de error legible gracias a su m茅todo `__str__`.

 **Importante**: Necesario para hacer logs (registros) de errores o mostrar mensajes informativos al usuario.

## F - La Cl谩usula `else` []

#### 1. **Introducci贸n:**

C贸digo que se ejecuta **solo si el `try` termin贸 sin errores**, pero que queda **fuera** de la protecci贸n del `try`.

#### 2. **Ejemplo:**

```python
try:
    f = open('archivo.txt', 'r')
except OSError:
    print('No se pudo abrir')
else:
    # Solo entramos aqu铆 si open() funcion贸 bien.
    # Si readlines() falla, el 'except OSError' DE ARRIBA NO lo captura.
    print('El archivo tiene', len(f.readlines()), 'l铆neas')
    f.close()
```

#### 3. **Desarrollo:**

驴Por qu茅 no poner todo dentro del `try`? Porque el `try` debe proteger **solo** lo que esperas que falle. Si pones demasiado c贸digo en el `try`, podr铆as capturar por accidente un error que no quer铆as ocultar (por ejemplo, un error de programaci贸n tuyo en `readlines` en lugar del error de abrir el archivo).

 **Espec铆fico**: til para mantener el bloque `try` limpio y peque帽o ("Pedagog铆a de la precisi贸n").

## G - Lanzar Excepciones (`raise`) []

#### 1. **Introducci贸n:**

T煤 tambi茅n puedes provocar errores a prop贸sito cuando algo no cumple tus reglas.

#### 2. **Ejemplo:**

```python
# Lanzar una instancia
raise NameError('HolaMundo')

# Lanzar una clase (Python la instancia por ti)
raise ValueError # Equivale a raise ValueError()
```

#### 3. **Desarrollo:**

Usas la palabra clave `raise`. El argumento debe ser una instancia de excepci贸n o una clase de excepci贸n (que herede de `BaseException`).

 **Importante**: Esencial cuando escribes funciones y quieres avisar a quien use tu funci贸n que le pas贸 datos incorrectos.

## H - Re-lanzar Excepciones (Re-raising) []

#### 1. **Introducci贸n:**

A veces capturas un error solo para registrarlo (log), pero quieres que el error siga subiendo y detenga el programa (o lo maneje otro).

#### 2. **Ejemplo:**

```python
try:
    raise NameError('Hola')
except NameError:
    print('Vi pasar un error, pero lo dejo seguir...')
    raise # 隆Sin argumentos! Vuelve a lanzar el error actual.
```

#### 3. **Desarrollo:**

Si usas `raise` sin argumentos dentro de un `except`, Python vuelve a lanzar exactamente la misma excepci贸n que estaba siendo manejada.

 **Espec铆fico**: Muy usado en sistemas de logging o middleware.

## I - Encadenamiento de Excepciones (`from`) []

#### 1. **Introducci贸n:**

Cuando un error provoca otro, o quieres transformar un error t茅cnico en uno m谩s amigable, pero manteniendo el historial original.

#### 2. **Ejemplo:**

```python
try:
    func() # Falla con ConnectionError
except ConnectionError as exc:
    # Lanzamos un nuevo error, pero adjuntamos el original
    raise RuntimeError('Fallo al abrir base de datos') from exc
```

#### 3. **Desarrollo:**

Esto crea un reporte de error que dice: "Ocurri贸 el error X, el cual fue la causa directa del error Y".

- **`from None`**: Si quieres ocultar el error original y que solo se vea el nuevo, usa `raise NuevoError from None`.

 **Espec铆fico**: Vital para depurar (debugging) problemas complejos donde un fallo en cadena oculta la causa ra铆z.

## J - Excepciones Definidas por el Usuario []

#### 1. **Introducci贸n:**

Puedes crear tus propios tipos de error creando clases que hereden de `Exception`.

#### 2. **Ejemplo:**

```python
class MiErrorPropio(Exception):
    pass

raise MiErrorPropio("Algo sali贸 mal en mi l贸gica")
```

#### 3. **Desarrollo:**

Por convenci贸n, los nombres de las clases de excepci贸n terminan en "Error". Suelen ser clases simples. Heredar de `Exception` (y no de `BaseException`) asegura que sean errores "normales" y no eventos de sistema (como salir del programa).

 **Espec铆fico**: til en proyectos grandes para identificar errores espec铆ficos de tu l贸gica de negocio.

## K - Acciones de Limpieza: `finally` []

#### 1. **Introducci贸n:**

El bloque "Janitor" (conserje). Se ejecuta **SIEMPRE**, haya habido error o no, se haya hecho `return`, `break` o lo que sea.

#### 2. **Ejemplo:**

```python
def dividir(x, y):
    try:
        result = x / y
    except ZeroDivisionError:
        print("隆Divisi贸n por cero!")
    else:
        print("El resultado es", result)
    finally:
        print("Ejecutando limpieza (cerrar recursos, etc.)")

dividir(2, 1) # Imprime resultado y luego "Ejecutando limpieza"
dividir(2, 0) # Imprime error y luego "Ejecutando limpieza"
```

#### 3. **Desarrollo:**

- Si hubo una excepci贸n **no manejada**, `finally` se ejecuta y _luego_ el error se vuelve a lanzar.
- **Advertencia Paranoica**: Evita usar `return`, `break` o `continue` dentro de `finally`. Si lo haces, el error original se pierde (se "come" la excepci贸n) y el programa sigue como si nada. Python 3.14 empezar谩 a emitir advertencias sobre esto.

 **Importante**: Obligatorio para cerrar archivos, conexiones a bases de datos o liberar recursos externos.

## L - Limpieza Predefinida: `with` []

#### 1. **Introducci贸n:**

Es la forma moderna y segura de usar recursos (como archivos). Hace el `finally` (cerrar el archivo) autom谩ticamente por ti.

#### 2. **Ejemplo:**

```python
# Forma manual (peligrosa si olvidas cerrar o hay error antes)
f = open("archivo.txt")
# ... uso ...
f.close()

# Forma recomendada (segura)
with open("archivo.txt") as f:
    for line in f:
        print(line)
# Aqu铆 'f' ya se cerr贸 autom谩ticamente, incluso si hubo error.
```

#### 3. **Desarrollo:**

Los objetos que soportan esto (como archivos) tienen acciones de limpieza predefinidas. Siempre que puedas, usa `with`.

 **Fundamental**: Es la "buena pr谩ctica" n煤mero 1 al trabajar con archivos en Python.

## M - Grupos de Excepciones (`ExceptionGroup`) []

#### 1. **Introducci贸n:**

A veces ocurren varios errores a la vez (com煤n en tareas paralelas/concurrencia). `ExceptionGroup` es una caja que contiene varios errores dentro.

#### 2. **Ejemplo:**

```python
excs = [OSError('error 1'), SystemError('error 2')]
raise ExceptionGroup('hubo problemas', excs)
```

#### 3. **Desarrollo:**

Es una excepci贸n que envuelve una lista de otras excepciones. Se muestra en el traceback como un 谩rbol de errores anidados.

 **Espec铆fico**: Introducido recientemente para soportar mejor la programaci贸n as铆ncrona y paralela.

## N - Manejo de Grupos: `except*` vs `except` []

#### 1. **Introducci贸n:**

Aqu铆 hay una **diferencia cr铆tica**. `except` captura el grupo entero como un solo objeto. `except*` (con asterisco) entra dentro del grupo y captura solo los errores espec铆ficos que le pidas.

#### 2. **Ejemplo:**

```python
try:
    raise ExceptionGroup("grupo", [OSError(1), SystemError(2)])
except* OSError as e:
    print("Manejando OSErrors") # Se ejecuta para la parte de OSError
except* SystemError as e:
    print("Manejando SystemErrors") # Se ejecuta TAMBIN para SystemError
```

#### 3. **Desarrollo:**

- **`except OSError`**: No funcionar铆a bien aqu铆 porque lo que vuela es un `ExceptionGroup`, no un `OSError` directo.
- **`except* OSError`**: Le dice a Python "Mira dentro del grupo, saca los `OSError`, man茅jalos aqu铆, y deja el resto de errores para otros handlers".
- Permite manejar m煤ltiples errores de un solo golpe.

 **Espec铆fico**: Solo necesario si trabajas con librer铆as que lanzan `ExceptionGroup` o concurrencia.

## O - Enriquecer Excepciones (`add_note`) []

#### 1. **Introducci贸n:**

驴Atrapaste un error y quieres pegarle un "post-it" con informaci贸n extra antes de dejarlo seguir? Usa `add_note`.

#### 2. **Ejemplo:**

```python
try:
    raise TypeError('tipo incorrecto')
except Exception as e:
    e.add_note('Sucedi贸 en la iteraci贸n 5')
    raise
```

#### 3. **Desarrollo:**

El m茅todo `add_note(string)` a帽ade texto a la lista de notas de la excepci贸n. Estas notas aparecen en el Traceback final, ayudando a entender el contexto (ej: en qu茅 paso de un bucle ocurri贸 el fallo).

 **Espec铆fico**: Muy 煤til para debugging y enriquecer logs sin cambiar el tipo de excepci贸n.
